<!-- fault_detector.html 수정 -->
<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>AI Detector A-RAG</title>
    <link rel="stylesheet" href="/static/css/fault_detector.css" />
    <script src="/static/js/marked.min.js"></script>
    <script src="/static/js/fault_detector.js" defer></script>
  </head>

  <body>
    <div class="container">
      <div class="sidebar" id="summary-list">
        <!-- 질문 요약 항목이 여기에 동적으로 추가됨 -->
      </div>

      <div class="drag-handle" id="drag-handle">
        <div class="toggle-btn" id="toggle-btn"></div>
      </div>

      <div class="main">
        <div class="content-area">
          <div id="response-box"></div>
        </div>

        <div class="input-container">
          <div class="input-top">
            <div style="flex-shrink: 0">
              • 선택 장비:
              <span id="equip_id">[{{ sector }}] {{ equip_id }} (국사:{{ guksa_name }})</span>
            </div>

            <div style="display: flex; align-items: center; gap: 10px">
              <button class="fault-view-btn" id="getCableBtn">선로장애 확인</button>
              <button class="fault-view-btn" id="getMWInfoBtn">정전/페이딩 확인</button>
              <button class="fault-view-btn" id="clearChatBtn">대화 초기화</button>
            </div>
          </div>

          <div>
            <textarea
              id="prompt-input"
              placeholder="장애점을 찾을 수 있도록 현재 장애 증상과 분야별 경보를 입력해 주세요..."
            >
            </textarea>

            <button class="send-button" id="sendBtn">↑</button>
          </div>
        </div>
      </div>
    </div>

    <script>
      // 서버에서 전달받은 경보 데이터
      window.faultData = {{ fault_data | tojson | safe }};
      console.log("🎯 window.faultData 설정 완료:", window.faultData);
    </script>
  </body>
</html>
